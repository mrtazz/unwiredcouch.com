<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="pragma" content="no-cache"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link href="/css/style.min.css?v=e1be0c2" media="screen" rel="stylesheet" type="text/css"/>
    <link href="/css/mobile.min.css?v=e1be0c2" media="handheld, only screen and (max-device-width: 960px)" rel="stylesheet" type="text/css"/>
    <link href="https://unwiredcouch.com/atom.xml" type="application/atom+xml" rel="alternate" title="unwiredcouch.feed" />

    <title>Context specific dotfiles on unwiredcouch.com</title>
  </head>
  <body>

    <header>
      <a class="gravatar hidemobile" href="/">
        <img src="https://www.gravatar.com/avatar/89e0ad1229121f46047977ac547bd7b4.jpg?s=100"
             height="100" width="100" class="avatar" alt="gravatar image" />
      </a>
      <div id="intro">
        <p>Hi! I'm <a href="/about.html">Daniel</a>.</p>
        <p>I like
        <a href="/">writing</a>,
        <a href="https://www.instagram.com/mrtazz/">drawing</a>,
        <a href="https://twitter.com/mrtazz">tweeting</a>,
        <a href="/talks">sometimes give talks</a>,
        and <a href="http://code.mrtazz.com">occasionally write code</a>.
        </p>
      </div>
    </header>

    <div id="content">
            <div class="post">
        <h2> <a href=""> Context specific dotfiles </a></h2>

<p>I have a <a href="https://github.com/mrtazz/muttfiles">collection</a> <a href="https://github.com/mrtazz/vimfiles">of</a> <a href="https://github.com/mrtazz/zshfiles">various</a> <a href="https://github.com/mrtazz/dotfiles">dotfiles</a> which I use to configure the most important tools I use everyday. Naturally all those are kept in git and shared between all the machines I work on. The problem is that there might be things I don’t want to store publicly. This might include shell aliases to hostnames, git user emails I only use at work, etc. I used to manage this by having a different branch checked out on machines at work and would just merge in master whenever something changes. However this was super tedious as I had to remember to switch to the right branch depending on whether I wanted to make public or private changes. And after changing something I had to remember to switch back to the correct branch and not accidentally push the private branch to public GitHub. What it effectively ended up being was a whole bunch of dirty repos on different machines that were never in sync and partly had duplicate changes and partly only worked on that box anyways. And whenever I wanted to bring them back in sync it was a huge pain. So I decided to adopt a new strategy for managing context specific dotfiles.</p>
<p>I added a git repo <code>~/.dotoverrides</code> to all the machines I work on (or at least most of them) which contains a <code>vimrc</code>, a <code>zshrc</code> and so on. On my work machines this is pushed to a repo on our internal GitHub Enterprise instance so I can easily share it between machines. And all my regular dotfiles now source those override files at the very end.</p>
<p>So in my regular <code>.vimrc</code> I have something like this:</p>
<pre class="vim"><code>&quot; source overrides configs
if filereadable($HOME.&quot;/.dotoverrides/vimrc&quot;)
  exec &quot;:source &quot;. $HOME . &quot;/.dotoverrides/vimrc&quot;
endif</code></pre>
<p>In my <code>.zshrc</code> I have this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="bu">[</span> <span class="ot">-f</span>  <span class="va">${HOME}</span>/.dotoverrides/zshrc<span class="bu"> ]</span> <span class="kw">&amp;&amp;</span> <span class="bu">source</span> <span class="va">${HOME}</span>/.dotoverrides/zshrc</span></code></pre></div>
<p>And in git (only works if you have at least v1.7.10) I’ve added this stanza:</p>
<pre class="config"><code>[include]
  path = ~/.dotoverrides/gitconfig</code></pre>
<p>Now I can easily share and push/pull my regular dotfiles in public GitHub and don’t have to pay attention whether or not I’m on the correct branch and if I’m not accidentally pushing to the wrong remote. Whenever I need to use different settings on a work machine I just make sure to add it to the overrides file and have it ready as soon as I open a new shell, run a git command or open vim again.</p>
<p>So much easier!</p>

      </div>
    </div>
  </body>
</html>
